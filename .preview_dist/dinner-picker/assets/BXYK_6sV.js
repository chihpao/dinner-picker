import{_ as P}from"./DPvAsCCj.js";import{_ as v}from"./DlAUqK2U.js";import{c,o as i,a as s,p as O,e as x,r as y,n as E,f as _,q as u,b as n,w as p,C as j,D as B,E as g,y as C,G as A,m as R,z as T}from"./lYf44GPV.js";import{I as S}from"./BbR-qeLV.js";import{u as z}from"./D8w1TNDh.js";import{u as D}from"./BVjulhNg.js";import{u as q}from"./BrKs8iOl.js";const V={},X={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"square","stroke-linejoin":"miter"};function H(r,t){return i(),c("svg",X,[...t[0]||(t[0]=[s("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},null,-1),s("polyline",{points:"9 22 9 12 15 12 15 22"},null,-1)])])}const L=Object.assign(v(V,[["render",H]]),{__name:"IconsIconHome"}),G={},U={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"square","stroke-linejoin":"miter"};function F(r,t){return i(),c("svg",U,[...t[0]||(t[0]=[s("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},null,-1),s("path",{d:"M22 12A10 10 0 0 0 12 2v10z"},null,-1)])])}const M=Object.assign(v(G,[["render",F]]),{__name:"IconsIconOverview"}),J={},K={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"square","stroke-linejoin":"miter"};function Q(r,t){return i(),c("svg",K,[...t[0]||(t[0]=[O('<line x1="1" y1="11" x2="23" y2="11"></line><line x1="1" y1="20" x2="23" y2="20"></line><line x1="4" y1="20" x2="4" y2="11"></line><line x1="20" y1="20" x2="20" y2="11"></line><line x1="12" y1="20" x2="12" y2="11"></line><path d="M1 11h22L12 2 1 11z"></path>',6)])])}const N=Object.assign(v(J,[["render",Q]]),{__name:"IconsIconBank"}),W={class:"sidebar-brand"},Y={key:0,class:"brand-content"},Z={class:"sidebar-nav"},tt={class:"nav-group"},st={class:"icon"},et={key:0,class:"text"},nt={class:"nav-group"},ot={class:"icon"},at={key:0,class:"text"},ct={class:"icon"},it={key:0,class:"text"},rt={class:"icon"},lt={key:0,class:"text"},_t=x({__name:"AppSidebar",setup(r){const t=y(!1),e=()=>t.value=!t.value;return(a,d)=>{const l=P;return i(),c("aside",{class:E(["sidebar",{collapsed:_(t)}])},[s("div",W,[_(t)?u("",!0):(i(),c("div",Y,[...d[0]||(d[0]=[s("div",{class:"brand-text"},"Dinner Picker",-1)])])),s("button",{class:"toggle-btn",onClick:e},[s("span",{class:E(["arrow",{flipped:_(t)}])},"◀",2)])]),s("nav",Z,[s("div",tt,[n(l,{to:"/",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",st,[n(L)]),_(t)?u("",!0):(i(),c("span",et,"首頁"))]),_:1})]),s("div",nt,[n(l,{to:"/total/entry",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",ot,[n(S)]),_(t)?u("",!0):(i(),c("span",at,"一般記帳"))]),_:1}),n(l,{to:"/total",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",ct,[n(M)]),_(t)?u("",!0):(i(),c("span",it,"全消費總覽"))]),_:1}),n(l,{to:"/total/accounts",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",rt,[n(N)]),_(t)?u("",!0):(i(),c("span",lt,"帳戶管理"))]),_:1})])])],2)}}}),dt=Object.assign(v(_t,[["__scopeId","data-v-2df46617"]]),{__name:"AppSidebar"}),pt={class:"mobile-nav"},ut={class:"icon-box"},vt={class:"icon-box"},mt={class:"icon-box"},ft={class:"icon-box"},ht=x({__name:"MobileNav",setup(r){return(t,e)=>{const a=P;return i(),c("nav",pt,[n(a,{to:"/",exact:"",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",ut,[n(L)]),e[0]||(e[0]=s("span",{class:"label"},"首頁",-1))]),_:1}),n(a,{to:"/total/entry",exact:"",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",vt,[n(S)]),e[1]||(e[1]=s("span",{class:"label"},"記帳",-1))]),_:1}),n(a,{to:"/total",exact:"",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",mt,[n(M)]),e[2]||(e[2]=s("span",{class:"label"},"總覽",-1))]),_:1}),n(a,{to:"/total/accounts",exact:"",class:"nav-item","active-class":"active"},{default:p(()=>[s("span",ft,[n(N)]),e[3]||(e[3]=s("span",{class:"label"},"帳戶",-1))]),_:1})])}}}),wt=Object.assign(v(ht,[["__scopeId","data-v-b6c41bf2"]]),{__name:"MobileNav"});function xt(){const r=j(),t=B(),e=["/","/total/entry","/total","/total/accounts"];let a=0,d=0;const l=50,m=o=>{a=o.changedTouches[0].screenX},f=o=>{},w=o=>{d=o.changedTouches[0].screenX,$()},$=()=>{const o=t.path,h=e.indexOf(o);if(h===-1)return;const I=d-a;I>l?h>0&&r.push(e[h-1]):I<-l&&h<e.length-1&&r.push(e[h+1])},b=o=>{o&&(o.addEventListener("touchstart",m),o.addEventListener("touchmove",f),o.addEventListener("touchend",w))},k=o=>{o&&(o.removeEventListener("touchstart",m),o.removeEventListener("touchmove",f),o.removeEventListener("touchend",w))};return g(()=>{}),{initSwipe:b,destroySwipe:k}}function bt(){const r=y(!1),t=()=>{r.value=window.matchMedia("(display-mode: standalone)").matches};return C(()=>{t(),window.addEventListener("appinstalled",t),window.addEventListener("beforeinstallprompt",t)}),g(()=>{window.removeEventListener("appinstalled",t),window.removeEventListener("beforeinstallprompt",t)}),{isPwa:r}}const kt={key:0,class:"pwa-install-prompt"},yt={key:0},gt=x({__name:"PwaInstallPrompt",setup(r){const{isPwa:t}=bt(),{installPromptEvent:e,installPwa:a}=A();return(d,l)=>_(t)?u("",!0):(i(),c("div",kt,[_(e)?(i(),c("div",yt,[s("button",{onClick:l[0]||(l[0]=(...m)=>_(a)&&_(a)(...m))}," 下載應用程式 ")])):u("",!0)]))}}),$t=Object.assign(v(gt,[["__scopeId","data-v-81136b2c"]]),{__name:"PwaInstallPrompt"}),It={class:"app-layout"},Et={class:"sidebar-wrapper"},Pt={class:"wrap"},Ct=x({__name:"default",setup(r){const{initAuth:t,user:e}=z(),{fetchRestaurants:a}=D(),{loadEntries:d}=q(),{initSwipe:l,destroySwipe:m}=xt(),f=y(null);return C(()=>{t(),a(),l(f.value)}),g(()=>{m(f.value)}),R(e,()=>{d()},{immediate:!0}),(w,$)=>{const b=dt,k=wt;return i(),c("div",It,[s("div",Et,[n(b)]),s("div",{ref_key:"mainContentRef",ref:f,class:"main-content"},[s("div",Pt,[T(w.$slots,"default",{},void 0)]),n(k)],512),n($t)])}}}),At=v(Ct,[["__scopeId","data-v-db7e25a3"]]);export{At as default};
